[
  {
    "category": "dependencies",
    "description": "Install Recharts library for chart visualization",
    "steps": [
      "Run 'pnpm add recharts' to install the package",
      "Verify package appears in package.json dependencies",
      "Check that node_modules contains recharts",
      "Ensure TypeScript types are available (@types/recharts if needed)"
    ],
    "passes": true
  },
  {
    "category": "data-layer",
    "description": "Add repository method to aggregate pageviews by day",
    "steps": [
      "Open data/events.repo.ts",
      "Add getPageViewsByDay(days: number) method",
      "Write SQL query with DATE(created_at), COUNT(*), GROUP BY",
      "Filter by created_at >= NOW() - INTERVAL 'X days'",
      "Order by date ASC",
      "Return array of { date: string, views: number }",
      "Ensure method handles edge cases (no data, invalid days parameter)"
    ],
    "passes": true
  },
  {
    "category": "data-layer",
    "description": "Add DTO function to fetch aggregated pageview data",
    "steps": [
      "Open data/events.dto.ts",
      "Add getPageViewsOverTime(days: number) function",
      "Call events.repo.ts getPageViewsByDay method",
      "Transform/format data if needed",
      "Return array of { date: string, views: number }",
      "Add appropriate error handling"
    ],
    "passes": true
  },
  {
    "category": "ui-component",
    "description": "Create AnalyticsChart component with Recharts line chart",
    "steps": [
      "Create components/analytics-chart.tsx as a client component",
      "Add 'use client' directive at top of file",
      "Import LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer from recharts",
      "Accept data prop with type { date: string, views: number }[]",
      "Render ResponsiveContainer with appropriate height",
      "Configure LineChart with data prop",
      "Add XAxis with dataKey='date' and proper date formatting",
      "Add YAxis with dataKey='views'",
      "Add CartesianGrid for visual grid lines",
      "Add Tooltip for hover interactions",
      "Add Line component with stroke color and dataKey='views'",
      "Ensure responsive design works on mobile"
    ],
    "passes": true
  },
  {
    "category": "ui-component",
    "description": "Create TimeRangeSelector component with 7/30/90 day buttons",
    "steps": [
      "Create components/time-range-selector.tsx as a client component",
      "Add 'use client' directive at top of file",
      "Accept onRangeChange callback prop",
      "Accept selectedRange prop for controlled state",
      "Create three button elements for 7, 30, and 90 days",
      "Style buttons using Tailwind classes",
      "Highlight selected button with accent color",
      "Call onRangeChange when button is clicked",
      "Ensure keyboard accessibility (tab navigation, enter/space to activate)",
      "Ensure responsive layout for mobile"
    ],
    "passes": true
  },
  {
    "category": "integration",
    "description": "Integrate chart components into analytics page",
    "steps": [
      "Open app/analytics/page.tsx",
      "Import AnalyticsChart component",
      "Import TimeRangeSelector component",
      "Add state management for selected time range (if needed as client component section)",
      "Fetch chart data using getPageViewsOverTime DTO function",
      "Pass data to AnalyticsChart component",
      "Add TimeRangeSelector below existing analytics content",
      "Add AnalyticsChart below TimeRangeSelector",
      "Ensure page maintains force-dynamic rendering",
      "Verify chart appears below existing analytics content as specified"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Line chart displays daily pageview counts",
    "steps": [
      "Navigate to /analytics page",
      "Verify line chart is visible",
      "Check that chart shows date on X-axis",
      "Check that chart shows view counts on Y-axis",
      "Verify data points are connected with line",
      "Hover over data points to verify tooltip appears",
      "Verify chart contains actual pageview data"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "Time range selector switches between 7, 30, and 90 day views",
    "steps": [
      "Navigate to /analytics page",
      "Verify three buttons are visible (7, 30, 90 days)",
      "Click '7 days' button",
      "Verify chart updates to show 7 days of data",
      "Verify button appears selected/highlighted",
      "Click '30 days' button",
      "Verify chart updates to show 30 days of data",
      "Verify 30 days button is now highlighted",
      "Click '90 days' button",
      "Verify chart updates to show 90 days of data",
      "Verify 90 days button is now highlighted"
    ],
    "passes": false
  },
  {
    "category": "performance",
    "description": "Chart loads within 2 seconds for 90 days of data",
    "steps": [
      "Navigate to /analytics page",
      "Select 90 days time range",
      "Measure time from click to chart render completion",
      "Verify chart loads in under 2 seconds",
      "Check browser DevTools Network tab for query performance",
      "Verify database query completes efficiently"
    ],
    "passes": false
  },
  {
    "category": "ui-responsive",
    "description": "Chart has responsive layout that works on mobile",
    "steps": [
      "Navigate to /analytics page",
      "Resize browser to mobile width (375px)",
      "Verify chart resizes appropriately",
      "Verify time range buttons are accessible and usable",
      "Check that chart maintains readability on small screens",
      "Verify no horizontal scrolling is required",
      "Test on actual mobile device if possible",
      "Verify touch interactions work correctly"
    ],
    "passes": false
  },
  {
    "category": "code-quality",
    "description": "Code follows project standards and passes linting",
    "steps": [
      "Run 'pnpm lint' to check for linting errors",
      "Fix any ESLint errors reported",
      "Verify imports are sorted alphabetically",
      "Run 'pnpm format' to format code with Prettier",
      "Run 'pnpm typecheck' to verify TypeScript types",
      "Fix any type errors",
      "Ensure all new components follow single-responsibility principle",
      "Verify proper use of path aliases (@components, lib, etc.)"
    ],
    "passes": false
  }
]
